# Monit Process Monitors - Generated by Custom Config plugin
# Do not edit manually - changes will be overwritten
{% if helpers.exists('OPNsense.CustomConfig.monitprocess.enabled') and OPNsense.CustomConfig.monitprocess.enabled == '1' %}
{% if helpers.exists('OPNsense.CustomConfig.monitprocess.processes.process') %}
{% for process in helpers.toList('OPNsense.CustomConfig.monitprocess.processes.process') %}

check process {{ process.name }} matching "{{ process.matchpattern }}"
    start program = "{{ process.startcmd }}"
{% if process.stopcmd %}
    stop program = "{{ process.stopcmd }}"
{% else %}
    stop program = "/usr/bin/pkill -f {{ process.matchpattern }}"
{% endif %}
    if does not exist then restart

{% endfor %}
{% endif %}
{% endif %}
